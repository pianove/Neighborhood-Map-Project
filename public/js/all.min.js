function initMap(){"use strict";var e={lat:13.06191,lng:80.26449},a={zoom:11,center:e,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}};map=new google.maps.Map(document.getElementById("map"),a),geocoder=new google.maps.Geocoder}var map,geocoder,categories=["all","yoga","food","mustsee","beach","shopping","hotel"],icons={all:{name:"ALL",icon:"public/img/all.png"},yoga:{name:"Yoga",icon:"public/img/yoga.png"},hotel:{name:"Hotel",icon:"public/img/hotel.png"},mustsee:{name:"Must see",icon:"public/img/must_see.png"},shopping:{name:"Shopping",icon:"public/img/shopping.png"},beach:{name:"Beach",icon:"public/img/beach.png"},food:{name:"Food",icon:"public/img/restaurant.png"}},initialLocations=[{name:"Yoga Vahini",street:"21/4, Ramaniyam Smriti Apartments, 3rd Floor, Beach Road, Kalakshetra Colony, Besant Nagar",city:"Chennai",category:"Yoga",description:"Centre for Specialised Yoga Training, Therapy & Research"},{name:"Krishnamacharya Yoga Mandiram",street:"31, 4th Cross Street, Rama Krishna Nagar, Mandaveli",city:"Chennai",category:"Yoga",description:"Since its inception, the KYM has always stood for quality teaching respecting the needs, interests, abilities and secular faiths of its students. The KYM has played a significant role in popularizing yoga as a holistic science that stems from a well founded theoretical basis, rather than as mere exercises for physical fitness."},{name:"YWCA International Guest House",street:"1086 Poonamallee High Road",city:"Chennai",category:"Hotel",description:"The YWCA guesthouse, set in shady grounds, offers very good value along with a calm atmosphere. Efficiently run by helpful staff, it has good-sized, brilliantly clean rooms, spacious common areas and solid-value meals."},{name:"Ashtalakshmi Temple",street:"Near Beach Seashore, Arulmigu Mahalakshmi Temple, Besant Nagar, Kalakshetra Colony",city:"Chennai",category:"Must see",description:"The Ashtalakshmi Kovil is a Hindu temple, which lies on the shorelines near the Elliot's beach."},{name:"Kapaleeshwar Temple",street:"12, North Mada Street",city:"Chennai",category:"Must see",description:"This ancient shrine to Shiva is centrally located and among the area’s most popular landmarks."},{name:"Sai Baba Temple",street:"Injambakkam",city:"Chennai",category:"Must see",description:"It is one stop for so many gods... There you go. So many different gods at one place. Sri Sai Ram... Peaceful place for worshipping."},{name:"Viswaroopa Adhivyadhihara Sri Bhaktha Anjaneyaswami Temple",street:"1, 8th street Ram Nagar, Nanganallur",city:"Chennai",category:"Must see",description:"This temple has a huge statue of Hanuman. Powerful god. The temple is inside nanganallur and the temple is a must see one. Saturdays is crowded compared with other days."},{name:"FabIndia",street:"3 Woods Road",city:"Chennai",category:"Shopping",description:"This is the place to go for all your natural-dyed, hand loomed and hand made textiles."},{name:"Sri Parthasarathy Temple",street:"Singarachari Street, Triplicane",city:"Chennai",category:"Must see",description:"Close to Marina Beach, yet another architectural wonder from the 8th century can be part of the itinerary. An intricate pyramid-shaped rajagopuram (dome) stands prominently and is the main feature of the temple. As anecdotes go, the British were unable to pronounce the original name, Thiriallikeni, and rechristened it Triplicane."},{name:"San Thome Basilica",street:" 38, San Thome High Road",city:"Chennai",category:"Must see",description:"Probably the most magnificent and prominent reminder of Chennai's colonial lineage, the San Thome Church bears a colossal amount of history since A.D. 52, the year when St. Thomas traveled to India, though the Roman Catholic basilica was built in the 16th century by the Portuguese. It was then rebuilt by the British in 1893. The imposing structure reaches a height of 155 feet and emanates peace and architectural splendor with its tall spires over the tomb of the saint. The sea makes a wonderful backdrop to the pristine white structure. The San Thome Church is considered one of the pilgrimages for people around the world."},{name:"Karl Schmidt Memorial",street:"Elliots Beach, Besant Nagar",city:"Chennai",category:"Must see",description:"The Karl Schmidt Memorial is an architectural landmark commemorating a Danish sailor who drowned in 1930 trying to save the life of a girl."},{name:"Marina Beach",street:"Marina Beach",city:"Chennai",category:"Beach",description:"This expansive beach is Chennai's most famous tourist attraction, though the undercurrent is too strong for all but the strongest swimmers."},{name:"Breezy Beach",street:"Valmiki Nagar",city:"Chennai",category:"Beach",description:"this is the only beach which is best secured and peaceful as well in the whole lot of chennai beaches '('except on holidays and week ends which is heavily crowded')'. Secured because police patrolling is available."},{name:"Chennai Turtle Walk",street:"8/25, 2nd Street, DP Nagar, Kotturpuram",city:"Chennai",category:"Must see",description:"Join independent conservation and wildlife enthusiast groups such as the Students’ Sea Turtle Conservation Network for midnight walks from Neelangarai to Besant Nagar beach to aid the endangered Olive Ridley sea turtle by relocating eggs for safe release to the sea."},{name:"Nandanam Restaurant",street:"E 28, 1st Floor, 2nd Avenue, GOCHS Colony, Besant Nagar",city:"Chennai",category:"Food",description:"A really good Kerala restaurant in the area. Syrian Beef Fry is a must try item, it totally steals the show. I mostly go there for lunches, which are good - fish curry meals. You get most Kerala varieties like appam, idiyappam, etc."},{name:"Kalakshetra Dance School",street:"Thiruvanmiyur",city:"Chennai",category:"Must see",description:"Kalakshetra has been around since 1936. Many subtle nuances existed in the making of this institution — a symbol of uprising against the British, commitment to theosophy and creation of a strong identity for Indian classical dance forms."},{name:"Pondy Bazaar",street:"Thyagaraya Road",city:"Chennai",category:"Shopping",description:"Pondy bazaar is a pretty old shopping area on T Road in Chennai. Hosting a variety of stores, most of the branded shops have their outlets here."},{name:"M.Rm.Rm. Cultural Foundation",street:"Thyagaraya Road",city:"Chennai",category:"Shopping",description:"The MRM Foundation is a nonprofit organization that documents and supports revival of rural crafts, textiles and architecture. Keep walking on MRC Nagar Main Rd after passing the SUN TV then turn left. You will find your paradise on your left!"},{name:"Kitchen e Lazeez",street:"68/1, Q Block,Ground Floor, 15th Street | Annanagar East",city:"Chennai",category:"Food",description:"If u want to learn cooking it's one of the best places to visit. Do check their Facebook page (facebook.com/kitchenelazeez) events section and plan accordingly. Classes on Saturdays and Mondays only."},{name:"VK Advanced Yoga Teacher Venue",street:"77, Greenways Rd Ext, Bishop Garden, Raja Annamalai Puram",city:"Chennai",category:"Yoga",description:"This location will host the Vinyasa Krama 100h Advanced Yoga Teacher Program with Srivatsa Ramaswami."},{name:"Mamallapuram",street:"Varaha Cave",city:"Mamallapuram",category:"Must see",description:"A tourist town 60 km south of Chennai famous for its stone carvings.You can also catch the bus from Pondicherry. Learn how to surf with MUMU SURF SCHOOL in Mahabalipuram. If you are looking for an adventure in the Bay of Bengal, go and see Mukesh alias Mumu '('qualified Surfinstructor, Emergency Responder and Rescue Scuba Diver')'"}],Location=function(e){this.name=ko.observable(e.name),this.street=ko.observable(e.street),this.city=ko.observable(e.city),this.adress=ko.computed(function(){var e=this.street()+", "+this.city();return e},this),this.category=ko.observable(e.category),this.description=ko.observable(e.description)},ViewModel=function(){"use strict";function e(e){setTimeout(function(){e.setAnimation(null)},2500)}function a(a){null!==a.getAnimation()?a.setAnimation(null):(a.setAnimation(google.maps.Animation.BOUNCE),e(a))}function t(e,r,l){var c;r.geocode({address:e.adress()},function(h,d){if(d===google.maps.GeocoderStatus.OK){e.latLng=h[0].geometry.location;var m=e.category().toLowerCase().replace(" ","");c=new google.maps.Marker({map:l,animation:google.maps.Animation.DROP,position:h[0].geometry.location,title:e.name(),icon:icons[m].icon,onClick:function(){s.close(map,c),s=i(this,e),a(this),s.open(map,this),n.loadWikipedia(c.title)}}),c.setVisible(!1),n.markersArray.push(c),google.maps.event.addListener(c,"click",function(){this.onClick()},!1)}else d==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?o=setTimeout(function(){t(e,r,l)},1200):alert("Geocode was not successful for the following reason: "+d)})}function i(e,a){var t='<div class= "info-container"><div id="info-title"><b>'+a.name()+"</b></div>"+a.adress()+"<p><b>Category: "+a.category()+"</b></p><p>"+a.description()+"</p><p><b>Wikipedia Links: </b><p><ul id='wikipedia-links' style='height: 40px;' ></ul></div>",i=new google.maps.InfoWindow({content:t,maxWidth:280});return i}var o,n=this,s=new google.maps.InfoWindow({maxWidth:260}),r=0;this.markersArray=ko.observableArray([]),this.addMarker=function(e){t(e,geocoder,map)},this.initialLocationList=ko.observableArray([]),initialLocations.forEach(function(e){n.initialLocationList.push(new Location(e)),n.addMarker(n.initialLocationList()[r]),r++}),this.currentLocation=ko.observable(this.initialLocationList()[0]),this.getMarkerByName=function(e){var a;return n.markersArray().forEach(function(t){t.getTitle()===e&&(a=n.markersArray().indexOf(t))}),a},this.setCurrentLocation=function(e){n.currentLocation(e);var a=n.getMarkerByName(e.name()),t=n.markersArray()[a];t.onClick()},this.searchName=ko.observable(""),this.searchCat=ko.observable("ALL"),this.setCategory=function(e){n.searchCat(e.name)},this.category=ko.observableArray([]);for(var l=0;l<categories.length;l++)n.category.push(icons[categories[l]]);this.selectedLocations=ko.computed(function(){return s.close(map),$("#legend").hasClass("legend-hidden")&&(n.searchCat=ko.observable("ALL")),ko.utils.arrayFilter(n.initialLocationList(),function(e){var a=e.name().search(new RegExp(n.searchName(),"i")),t=!1,i=n.getMarkerByName(e.name()),o=n.markersArray()[i];return void 0!==o&&(-1!=a&&(t=!0,"ALL"!==n.searchCat()&&e.category()!==n.searchCat()&&(t=!1,a=-1)),o.setVisible(t)),-1!=a})}),this.findLocation=ko.observable(this.selectedLocations()[0]);var c=$(".sb_filter");c.on("click",function(e){$("#legend").toggleClass("legend-hidden")}),this.clearWikipedia=function(){var e=$("#wikipedia-links");e.text("")},this.loadWikipedia=function(e){var a=$("#wikipedia-links"),t=e;n.clearWikipedia();var i="http://en.wikipedia.org/w/api.php?action=opensearch&search="+t+"&format=json&callback=wikiCallback",o=setTimeout(function(){a.text("Failed to get wikipedia resources")},8e3);return $.ajax({url:i,dataType:"jsonp",jsonp:"callback",success:function(e){var t=e[1];0===e[1].length&&a.text("We could not find any relevant links");for(var i=0;i<t.length;i++){var n=t[i],s="http://en.wikipedia.org/wiki/"+n;a.append('<li><a href="'+s+'">'+n+"</a></li>")}clearTimeout(o)}}),!1};var h=$("button.sb_view");h.on("click",function(){var e=h.text().toLowerCase();"show list"===e?h.text("hide list"):"hide list"===e&&h.text("show list"),$(".list-view").toggleClass("view-hidden")})};$(window).load(function(){ko.applyBindings(new ViewModel)});